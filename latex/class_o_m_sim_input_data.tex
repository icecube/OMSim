\doxysection{OMSim\+Input\+Data Class Reference}
\hypertarget{class_o_m_sim_input_data}{}\label{class_o_m_sim_input_data}\index{OMSimInputData@{OMSimInputData}}


Manages the input data, including parsing and storing material properties.  




Inheritance diagram for OMSim\+Input\+Data\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=180pt]{class_o_m_sim_input_data__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for OMSim\+Input\+Data\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=180pt]{class_o_m_sim_input_data__coll__graph}
\end{center}
\end{figure}


\doxysubsection{Detailed Description}
Extends the functionalities provided by the {\ttfamily \doxylink{class_parameter_table}{Parameter\+Table}} class. It\textquotesingle{}s dedicated to the specific needs of managing input data related to materials and optical properties.

This class follows a global instance pattern and its lifecycle is managed by \doxylink{class_o_m_sim_detector_construction}{OMSim\+Detector\+Construction}. It can be accessed by other classes using \doxylink{class_o_m_sim_input_data_a810d7ae3b652d05e7b85eb568873eed2}{OMSim\+Input\+Data\+::get\+Instance()}. For example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{G4Material*\ lWater\ =\ \mbox{\hyperlink{class_o_m_sim_input_data_a810d7ae3b652d05e7b85eb568873eed2}{OMSimInputData::getInstance}}().\mbox{\hyperlink{class_o_m_sim_input_data_a12e64f3ec83f33c173da0cd5954dd5b2}{getMaterial}}(\textcolor{stringliteral}{"{}CustomWater"{}});\ \textcolor{comment}{//\ Retrieve\ a\ Geant4\ material\ by\ name}}
\DoxyCodeLine{G4OpticalSurface*\ lSurface\ =\ \mbox{\hyperlink{class_o_m_sim_input_data_a810d7ae3b652d05e7b85eb568873eed2}{OMSimInputData::getInstance}}().\mbox{\hyperlink{class_o_m_sim_input_data_aca56b05e268bbb47761dbcc8e487c283}{getOpticalSurface}}(\textcolor{stringliteral}{"{}SomeSurfaceName"{}});\ \textcolor{comment}{//\ Retrieve\ an\ optical\ surface\ by\ name}}

\end{DoxyCode}


(see also \doxysectlink{class_parameter_table_ExampleUsageParameterTable}{Minimal example}{2}) This class assumes certain conventions in naming and structuring the input files, which aids in automatically identifying and processing them. \doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
G4\+Material \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{class_o_m_sim_input_data_a12e64f3ec83f33c173da0cd5954dd5b2}{get\+Material}} (G4\+String p\+Name)
\begin{DoxyCompactList}\small\item\em Retrieves a G4\+Material based on the given name. \end{DoxyCompactList}\item 
G4\+Optical\+Surface \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{class_o_m_sim_input_data_aca56b05e268bbb47761dbcc8e487c283}{get\+Optical\+Surface}} (G4\+String p\+Name)
\item 
\Hypertarget{class_o_m_sim_input_data_a84781faca6d03b8f9f13777c85a1c9dc}\label{class_o_m_sim_input_data_a84781faca6d03b8f9f13777c85a1c9dc} 
void {\bfseries search\+Folders} ()
\begin{DoxyCompactList}\small\item\em Searches through predefined folders for input data files. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{class_parameter_table}{Parameter\+Table}}}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\T \mbox{\hyperlink{class_parameter_table_adb1234ccb47c9e44ecd7f8c5cb9e0407}{get\+Value}} (G4\+String p\+Key, G4\+String p\+Parameter)
\begin{DoxyCompactList}\small\item\em Fetches a value from the table based on a key and parameter. \end{DoxyCompactList}\item 
G4bool \mbox{\hyperlink{class_parameter_table_a462edf8d5284908b7c59c851e367b779}{check\+If\+Tree\+Name\+In\+Table}} (G4\+String p\+Key)
\begin{DoxyCompactList}\small\item\em Checks if a key exists within the table. \end{DoxyCompactList}\item 
G4bool \mbox{\hyperlink{class_parameter_table_a8181a3c7b97c75eae98e3d6fb5d3e048}{check\+If\+Key\+In\+Tree}} (G4\+String p\+\_\+tree\+Name, G4\+String p\+\_\+key)
\begin{DoxyCompactList}\small\item\em Checks if a specific key exists in a given JSON tree. \end{DoxyCompactList}\item 
G4double \mbox{\hyperlink{class_parameter_table_aa7546560723ba3b94c08229266b27307}{get\+Value\+With\+Unit}} (G4\+String p\+Key, G4\+String p\+Parameter)
\begin{DoxyCompactList}\small\item\em Fetches the value associated with a given key and parameter. \end{DoxyCompactList}\item 
pt\+::ptree \mbox{\hyperlink{class_parameter_table_a131ddfbbf38d27b59f454a4ec96b2b9e}{append\+And\+Return\+Tree}} (G4\+String p\+File\+Name)
\item 
pt\+::ptree \mbox{\hyperlink{class_parameter_table_a042ee0eca2c9daa755d7a472608e6d66}{get\+JSONTree}} (G4\+String p\+Key)
\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{class_parameter_table_a3c2a94b50a41341c104b5b1585d15efc}{parse\+Key\+Content\+To\+Vector}} (std\+::vector$<$ T $>$ \&p\+Vector, pt\+::ptree p\+Tree, std\+::basic\+\_\+string$<$ char $>$ p\+Key, G4double p\+Scaling, bool p\+Inverse)
\begin{DoxyCompactList}\small\item\em Parses the content of a JSON subtree into a vector, scaling values if necessary. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{class_parameter_table_aa74f75099b364ec36386ffc64d8dd3c7}{parse\+Key\+Content\+To\+Vector}} (std\+::vector$<$ T $>$ \&p\+Vector, std\+::basic\+\_\+string$<$ char $>$ p\+\_\+\+Map\+Key, std\+::basic\+\_\+string$<$ char $>$ p\+Key, G4double p\+Scaling, bool p\+Inverse)
\begin{DoxyCompactList}\small\item\em Parses the content of a JSON subtree into a vector, scaling values if necessary. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_o_m_sim_input_data_ae785a4cec814dcf95b2a4c0c0f2119db}{init}} ()
\begin{DoxyCompactList}\small\item\em Initializes the global instance of \doxylink{class_o_m_sim_input_data}{OMSim\+Input\+Data} and calls \doxylink{class_o_m_sim_input_data_a84781faca6d03b8f9f13777c85a1c9dc}{OMSim\+Input\+Data\+::search\+Folders} to load data. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{class_o_m_sim_input_data_a9ba12328d251141daeb086ae37f95f98}{shutdown}} ()
\begin{DoxyCompactList}\small\item\em Deletes the global instance of \doxylink{class_o_m_sim_input_data}{OMSim\+Input\+Data}. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{class_o_m_sim_input_data}{OMSim\+Input\+Data}} \& \mbox{\hyperlink{class_o_m_sim_input_data_a810d7ae3b652d05e7b85eb568873eed2}{get\+Instance}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_o_m_sim_input_data_a692d89c9fbdd287aa13c3bb5ddba8278}\label{class_o_m_sim_input_data_a692d89c9fbdd287aa13c3bb5ddba8278} 
std\+::map$<$ G4\+String, G4\+Optical\+Surface \texorpdfstring{$\ast$}{*} $>$ {\bfseries m\+\_\+optical\+Surface\+Map}
\begin{DoxyCompactList}\small\item\em Map that links names with optical surfaces. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_o_m_sim_input_data_a230292bc2609c1c353d42213b8f5fbf7}\label{class_o_m_sim_input_data_a230292bc2609c1c353d42213b8f5fbf7} 
enum class {\bfseries File\+Type} \{ \newline
{\bfseries Ice\+Cube\+ICE}
, {\bfseries Scintillator}
, {\bfseries Extra}
, {\bfseries Table}
, \newline
{\bfseries Surface}
, {\bfseries Material}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_o_m_sim_input_data_ae5886651fcc9baae2beb745d4377d756}\label{class_o_m_sim_input_data_ae5886651fcc9baae2beb745d4377d756} 
File\+Type {\bfseries get\+File\+Type} (const std\+::string \&file\+Name) const
\item 
\Hypertarget{class_o_m_sim_input_data_a2fe2c68872dc59b3a8fe9e961a28ec94}\label{class_o_m_sim_input_data_a2fe2c68872dc59b3a8fe9e961a28ec94} 
{\bfseries OMSim\+Input\+Data} (const \mbox{\hyperlink{class_o_m_sim_input_data}{OMSim\+Input\+Data}} \&)=delete
\item 
\Hypertarget{class_o_m_sim_input_data_a1cdb008638fa6e76dcdc50c3b442028a}\label{class_o_m_sim_input_data_a1cdb008638fa6e76dcdc50c3b442028a} 
\mbox{\hyperlink{class_o_m_sim_input_data}{OMSim\+Input\+Data}} \& {\bfseries operator=} (const \mbox{\hyperlink{class_o_m_sim_input_data}{OMSim\+Input\+Data}} \&)=delete
\item 
\Hypertarget{class_o_m_sim_input_data_ae6e28e3df96ad7ca980aec5d3b1f8ce6}\label{class_o_m_sim_input_data_ae6e28e3df96ad7ca980aec5d3b1f8ce6} 
void {\bfseries scann\+Data\+Directory} ()
\item 
void \mbox{\hyperlink{class_o_m_sim_input_data_a85c2bfa74bb3ac64f0e5f628d81bf4be}{process\+File}} (const std\+::string \&file\+Path, const std\+::string \&file\+Name)
\begin{DoxyCompactList}\small\item\em Processes a data file based on its name prefix. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_o_m_sim_input_data_ad606b2982529624542cb6cd4184160d3}\label{class_o_m_sim_input_data_ad606b2982529624542cb6cd4184160d3} 
G4\+String {\bfseries m\+\_\+data\+Directory}
\begin{DoxyCompactList}\small\item\em The current directory being scanned for data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static const std\+::unordered\+\_\+map$<$ std\+::string, File\+Type $>$ \mbox{\hyperlink{class_o_m_sim_input_data_a405e4a0a5c03a7218b3a91dd2e25de56}{file\+Type\+Prefixes}}
\end{DoxyCompactItemize}


\doxysubsection{Member Function Documentation}
\Hypertarget{class_o_m_sim_input_data_a810d7ae3b652d05e7b85eb568873eed2}\label{class_o_m_sim_input_data_a810d7ae3b652d05e7b85eb568873eed2} 
\index{OMSimInputData@{OMSimInputData}!getInstance@{getInstance}}
\index{getInstance@{getInstance}!OMSimInputData@{OMSimInputData}}
\doxysubsubsection{\texorpdfstring{getInstance()}{getInstance()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_o_m_sim_input_data}{OMSim\+Input\+Data}} \& OMSim\+Input\+Data\+::get\+Instance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\begin{DoxyReturn}{Returns}
A reference to the \doxylink{class_o_m_sim_input_data}{OMSim\+Input\+Data} instance. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em std\+::runtime\+\_\+error} & if accessed before initialization or after shutdown. \\
\hline
\end{DoxyExceptions}
\Hypertarget{class_o_m_sim_input_data_a12e64f3ec83f33c173da0cd5954dd5b2}\label{class_o_m_sim_input_data_a12e64f3ec83f33c173da0cd5954dd5b2} 
\index{OMSimInputData@{OMSimInputData}!getMaterial@{getMaterial}}
\index{getMaterial@{getMaterial}!OMSimInputData@{OMSimInputData}}
\doxysubsubsection{\texorpdfstring{getMaterial()}{getMaterial()}}
{\footnotesize\ttfamily G4\+Material \texorpdfstring{$\ast$}{*} OMSim\+Input\+Data\+::get\+Material (\begin{DoxyParamCaption}\item[{G4\+String}]{p\+\_\+name }\end{DoxyParamCaption})}

Handles both predefined and argument-\/based materials. For argument materials (prefixed with "{}arg"{}), it selects materials based on user-\/defined indices for glass, gel, and environment. For standard materials, it retrieves from Geant4\textquotesingle{}s material database or NIST manager.


\begin{DoxyParams}{Parameters}
{\em p\+Name} & Material name or argument material key ("{}arg\+Vessel\+Glass"{}, "{}arg\+Gel"{}, "{}arg\+World"{}). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the requested G4\+Material, or nullptr if not found.
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Uses \doxylink{class_o_m_sim_command_args_table}{OMSim\+Command\+Args\+Table} for argument-\/based material selection. 
\end{DoxyNote}
\begin{DoxyWarning}{Warning}
May cause undefined behavior if argument indices are out of bounds. 
\end{DoxyWarning}
\Hypertarget{class_o_m_sim_input_data_aca56b05e268bbb47761dbcc8e487c283}\label{class_o_m_sim_input_data_aca56b05e268bbb47761dbcc8e487c283} 
\index{OMSimInputData@{OMSimInputData}!getOpticalSurface@{getOpticalSurface}}
\index{getOpticalSurface@{getOpticalSurface}!OMSimInputData@{OMSimInputData}}
\doxysubsubsection{\texorpdfstring{getOpticalSurface()}{getOpticalSurface()}}
{\footnotesize\ttfamily G4\+Optical\+Surface \texorpdfstring{$\ast$}{*} OMSim\+Input\+Data\+::get\+Optical\+Surface (\begin{DoxyParamCaption}\item[{G4\+String}]{p\+\_\+name }\end{DoxyParamCaption})}

Get a G4\+Optical\+Surface. In order to get custom built materials, method \doxylink{class_o_m_sim_input_data_a84781faca6d03b8f9f13777c85a1c9dc}{search\+Folders()} should have already been called. 
\begin{DoxyParams}{Parameters}
{\em p\+\_\+name} & name of the optical surface or argument reflectors "{}arg\+Reflector"{} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
G4\+Optical\+Surface 
\end{DoxyReturn}
\Hypertarget{class_o_m_sim_input_data_ae785a4cec814dcf95b2a4c0c0f2119db}\label{class_o_m_sim_input_data_ae785a4cec814dcf95b2a4c0c0f2119db} 
\index{OMSimInputData@{OMSimInputData}!init@{init}}
\index{init@{init}!OMSimInputData@{OMSimInputData}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily void OMSim\+Input\+Data\+::init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

This method is normally called during construction of the base class \doxylink{class_o_m_sim_detector_construction}{OMSim\+Detector\+Construction}. \Hypertarget{class_o_m_sim_input_data_a85c2bfa74bb3ac64f0e5f628d81bf4be}\label{class_o_m_sim_input_data_a85c2bfa74bb3ac64f0e5f628d81bf4be} 
\index{OMSimInputData@{OMSimInputData}!processFile@{processFile}}
\index{processFile@{processFile}!OMSimInputData@{OMSimInputData}}
\doxysubsubsection{\texorpdfstring{processFile()}{processFile()}}
{\footnotesize\ttfamily void OMSim\+Input\+Data\+::process\+File (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{p\+\_\+file\+Path,  }\item[{const std\+::string \&}]{p\+\_\+file\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

The function identifies the type of data file based on the prefix of the filename. It then calls the correct extraction method. For \textquotesingle{}Surf\textquotesingle{} prefixed files, it also updates the m\+\_\+optical\+Surface\+Map. For \textquotesingle{}pmt\+\_\+\textquotesingle{}, \textquotesingle{}om\+\_\+\textquotesingle{}, and \textquotesingle{}usr\+\_\+\textquotesingle{} prefixed files, it invokes directly append\+And\+Return\+Tree without any extra parsing into Geant4 objects.


\begin{DoxyParams}{Parameters}
{\em p\+\_\+file\+Path} & Full path to the file. \\
\hline
{\em p\+\_\+file\+Name} & Name of the file (without the path). \\
\hline
\end{DoxyParams}
\Hypertarget{class_o_m_sim_input_data_a9ba12328d251141daeb086ae37f95f98}\label{class_o_m_sim_input_data_a9ba12328d251141daeb086ae37f95f98} 
\index{OMSimInputData@{OMSimInputData}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!OMSimInputData@{OMSimInputData}}
\doxysubsubsection{\texorpdfstring{shutdown()}{shutdown()}}
{\footnotesize\ttfamily void OMSim\+Input\+Data\+::shutdown (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

This method is normally called in the destructor \texorpdfstring{$\sim$}{\string~}\+OMSim\+Detector\+Construction. 

\doxysubsection{Member Data Documentation}
\Hypertarget{class_o_m_sim_input_data_a405e4a0a5c03a7218b3a91dd2e25de56}\label{class_o_m_sim_input_data_a405e4a0a5c03a7218b3a91dd2e25de56} 
\index{OMSimInputData@{OMSimInputData}!fileTypePrefixes@{fileTypePrefixes}}
\index{fileTypePrefixes@{fileTypePrefixes}!OMSimInputData@{OMSimInputData}}
\doxysubsubsection{\texorpdfstring{fileTypePrefixes}{fileTypePrefixes}}
{\footnotesize\ttfamily const std\+::unordered\+\_\+map$<$ std\+::string, OMSim\+Input\+Data\+::\+File\+Type $>$ OMSim\+Input\+Data\+::file\+Type\+Prefixes\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \{}
\DoxyCodeLine{\ \ \ \ \{\textcolor{stringliteral}{"{}IceCubeICE"{}},\ FileType::IceCubeICE\},}
\DoxyCodeLine{\ \ \ \ \{\textcolor{stringliteral}{"{}Scint"{}},\ FileType::Scintillator\},}
\DoxyCodeLine{\ \ \ \ \{\textcolor{stringliteral}{"{}Extra"{}},\ FileType::Extra\},}
\DoxyCodeLine{\ \ \ \ \{\textcolor{stringliteral}{"{}pmt\_"{}},\ FileType::Table\},}
\DoxyCodeLine{\ \ \ \ \{\textcolor{stringliteral}{"{}usr\_"{}},\ FileType::Table\},}
\DoxyCodeLine{\ \ \ \ \{\textcolor{stringliteral}{"{}Surf"{}},\ FileType::Surface\}\}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_o_m_sim_input_data_8hh}{OMSim\+Input\+Data.\+hh}}\item 
OMSim\+Input\+Data.\+cc\end{DoxyCompactItemize}
