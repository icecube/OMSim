\chapter{\texorpdfstring{$>$}{>} Radioactive Decays Studies}
\hypertarget{md_extra__doc_231__radioactive__decays}{}\label{md_extra__doc_231__radioactive__decays}\index{$>$ Radioactive Decays Studies@{$>$ Radioactive Decays Studies}}
\label{md_extra__doc_231__radioactive__decays_autotoc_md48}%
\Hypertarget{md_extra__doc_231__radioactive__decays_autotoc_md48}%
 Study for understanding the background produced by radioactive decays in borosilicate glass of optical modules \& PMTs.

\begin{quote}
{\bfseries{Warning}}\+: This study has been tested only for Vitrovex glass (m\+DOM/\+LOM16) and the 80mm \doxylink{classm_d_o_m}{m\+DOM} PMTs. Okamoto glass (D-\/\+Egg/\+LOM18) is currently under investigation. \end{quote}
The simulation considers the measured scintillation parameters and the specific activity of the isotopes to provide insights into the behavior of OMs in both air and ice environments over a time window t\+\_\+w. The number of time windows simulated is given by the argument {\ttfamily -\/-\/numevents}\`{}.

The primary output is a timestamped list of detected photons, which can be utilized to compute parameters such as the module\textquotesingle{}s expected dark rate. The simulation steps can be summarized as\+:


\begin{DoxyItemize}
\item Determining the number of decays within t\+\_\+w based on measured data.
\item Initiating decay chains for each event by positioning an isotope randomly in the pressure vessel.
\item Assigning decay times from a uniform distribution within \mbox{[}0, t\+\_\+w\mbox{]}, in case the time difference between mother-\/daughter decay times surpasses t\+\_\+w.
\item Saving into memory photons detected by the PMTs for downstream analysis.
\end{DoxyItemize}

Important customizations in the simulation involve the extension of Geant4\textquotesingle{}s original scintillation class, facilitating the simulation of more complex decay processes (8 lifetimes), and the modification of the \doxylink{class_g4_radioactive_decay}{G4\+Radioactive\+Decay} class which amends default decay time of isotopes.

The scintillation properties of the \doxylink{classm_d_o_m}{m\+DOM} glass were measured in the scope of several theses. For a summary check section 11.\+2 of \href{https://zenodo.org/record/8121321}{\texttt{ this thesis}}.

Currently, there are two analysis modes\+:


\begin{DoxyEnumerate}
\item With the {\ttfamily -\/-\/multiplicity\+\_\+study} argument\+: After each t\+\_\+w time window, the multiplicity is calculated and saved to a file. Raw data isn\textquotesingle{}t stored, as multiplicity studies generally involve extended simulation durations, leading to large volumes of photon data.
\item Without the {\ttfamily -\/-\/multiplicity\+\_\+study} argument\+: Data pertaining to photons and decayed isotopes is saved to files. If you are using multithreaded mode, then each thread will produce its own file.
\end{DoxyEnumerate}

To run the Simulation use the examplary line below\+:

{\ttfamily ./\+OMSim\+\_\+radioactive\+\_\+decays -\/-\/no\+\_\+\+PMT\+\_\+decays -\/-\/efficiency\+\_\+cut -\/n 1 -\/-\/time\+\_\+window 60 -\/-\/temperature -\/30 -\/o outputname -\/-\/environment 1 -\/-\/threads 3 -\/-\/detector\+\_\+type 2}\hypertarget{md_extra__doc_231__radioactive__decays_autotoc_md49}{}\doxysubsection{\texorpdfstring{Developer Notes\+: Geant4 Dependencies and Modifications}{Developer Notes: Geant4 Dependencies and Modifications}}\label{md_extra__doc_231__radioactive__decays_autotoc_md49}
This simulation module requires modifications to several Geant4 classes to enable custom handling of decay times. Unfortunately, the Geant4 physics library is not designed with extensibility in mind, making inheritance or selective function overrides impractical. As a result, we had to copy and modify entire class implementations. This approach makes the module highly dependent on the specific Geant4 version being used.

With each Geant4 update, class structures and function implementations may change, requiring updates to this moduleâ€”an admittedly tedious but necessary process. For Geant4 version 4.\+13, the following modifications were made\+:


\begin{DoxyEnumerate}
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}{\ttfamily \doxylink{class_g4_v_radioactive_decay}{G4\+VRadioactive\+Decay}}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} ~\newline

\begin{DoxyItemize}
\item Modified the {\ttfamily Decay\+Analog} method to customize the handling of decay times.
\end{DoxyItemize}
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}{\ttfamily \doxylink{class_g4_radioactive_decay}{G4\+Radioactive\+Decay}}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} ~\newline

\begin{DoxyItemize}
\item Adjusted the {\ttfamily Decay\+It} method to terminate decay processes when a specified termination isotope is reached, allowing for the intentional disruption of secular equilibrium.
\end{DoxyItemize}
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}{\ttfamily \doxylink{class_g4_particle_change_for_rad_decay}{G4\+Particle\+Change\+For\+Rad\+Decay}}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} ~\newline

\begin{DoxyItemize}
\item Overrode the {\ttfamily Check\+Secondary} method to disable time consistency checks for secondary particles. By default, Geant4 adjusts the secondary particle time if it is earlier than the parent particle\textquotesingle{}s time, which conflicts with our approach. ~\newline

\item Additionally, the {\ttfamily Add\+Secondary} method from the base class was copied, as otherwise the wrong {\ttfamily Check\+Secondary} would be called.
\end{DoxyItemize}
\end{DoxyEnumerate}

These changes highlight the module\textquotesingle{}s dependance on specific Geant4 implementations. For example, the time consistency checks in {\ttfamily \doxylink{class_g4_particle_change_for_rad_decay}{G4\+Particle\+Change\+For\+Rad\+Decay}} were introduced in Geant4 version 4.\+12, requiring additional adjustments. ~\newline


{\bfseries{Important\+:}} Always review and update these modifications whenever Geant4 is upgraded to ensure compatibility and correct functionality. 